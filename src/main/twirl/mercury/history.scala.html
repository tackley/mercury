@(url: String, pages: List[(mercury.Page, List[mercury.HistoryEntry])])
@import mercury._

@main("Show History") {
  <h1>History</h1>

    <form method="GET">
        <label>
            Url
            <input name="url" type="url" size="200" value="@url">
        </label>
        <input type="submit" value="Jump It">
    </form>

  <p>Note: all times are now displayed in London local time</p>

  @for( (page, historyEntries) <- pages) {

  <h3>@page.name</h3>
      <ul>
        @for(entry <- historyEntries.sortBy(_.to)) {
           <li>@RelativeDateTimeFormatter.print(entry.from) -> @RelativeDateTimeFormatter.print(entry.to): @entry.pos.inWordsWithoutPageName</li>
        }
      </ul>
  }

  @if(!url.isEmpty) {
      <p>
          <a href="http://dashboard.ophan.co.uk/graph/breakdown?url=@url&by=referrer">See the ophan graph for this content</a>
      </p>
  }


}